/**
 * multiscroll.js 0.1.2 Beta
 * https://github.com/alvarotrigo/multiscroll.js
 * MIT licensed
 *
 * Copyright (C) 2013 alvarotrigo.com - A project by Alvaro Trigo
 */
(function(t){t.fn.multiscroll=function(n){function e(){M=t(window).height(),t(".ms-tableCell").each(function(){t(this).css({height:p(t(this).parent())})}),o(),t.isFunction(n.afterResize)&&n.afterResize.call(this)}function o(){n.css3?(c(t(".ms-left"),"translate3d(0px, -"+t(".ms-left").find(".ms-section.active").position().top+"px, 0px)",!1),c(t(".ms-right"),"translate3d(0px, -"+t(".ms-right").find(".ms-section.active").position().top+"px, 0px)",!1)):(t(".ms-left").css("top",-t(".ms-left").find(".ms-section.active").position().top),t(".ms-right").css("top",-t(".ms-right").find(".ms-section.active").position().top))}function i(e){var o=e.index(),i=t(".ms-right").find(".ms-section").eq(E-1-o),s=e.data("anchor"),a=t(".ms-left .ms-section.active"),l=a.index()+1,r=f(e);L=!0,u(s);var v={left:e.position().top,right:i.position().top};if(i.addClass("active").siblings().removeClass("active"),e.addClass("active").siblings().removeClass("active"),n.css3){t.isFunction(n.onLeave)&&n.onLeave.call(this,l,o+1,r);var h="translate3d(0px, -"+v.left+"px, 0px)",p="translate3d(0px, -"+v.right+"px, 0px)";c(t(".ms-left"),h,!0),c(t(".ms-right"),p,!0),setTimeout(function(){t.isFunction(n.afterLoad)&&n.afterLoad.call(this,s,o+1),setTimeout(function(){L=!1},b)},n.scrollingSpeed)}else t.isFunction(n.onLeave)&&n.onLeave.call(this,l,o+1,r),t(".ms-left").animate({top:-v.left},n.scrollingSpeed,n.easing,function(){t.isFunction(n.afterLoad)&&n.afterLoad.call(this,s,o+1),setTimeout(function(){L=!1},b)}),t(".ms-right").animate({top:-v.right},n.scrollingSpeed,n.easing);lastScrolledDestiny=s,d(s),m(s,o)}function s(){document.addEventListener?(document.removeEventListener("mousewheel",l,!1),document.removeEventListener("wheel",l,!1)):document.detachEvent("onmousewheel",l)}function a(){document.addEventListener?(document.addEventListener("mousewheel",l,!1),document.addEventListener("wheel",l,!1)):document.attachEvent("onmousewheel",l)}function l(n){n=window.event||n;var e=Math.max(-1,Math.min(1,n.wheelDelta||-n.deltaY||-n.detail));return L||(0>e?t.fn.multiscroll.moveSectionDown():t.fn.multiscroll.moveSectionUp()),!1}function c(t,n,e){t.toggleClass("ms-easing",e),t.css(r(n))}function r(t){return{"-webkit-transform":t,"-moz-transform":t,"-ms-transform":t,transform:t}}function m(e,o){n.navigation&&(t("#multiscroll-nav").find(".active").removeClass("active"),e?t("#multiscroll-nav").find('a[href="#'+e+'"]').addClass("active"):t("#multiscroll-nav").find("li").eq(o).find("a").addClass("active"))}function d(e){n.menu&&(t(n.menu).find(".active").removeClass("active"),t(n.menu).find('[data-menuanchor="'+e+'"]').addClass("active"))}function f(n){var e=t(".ms-left .ms-section.active").index(),o=n.index();return e>o?"up":"down"}function u(t){n.anchors.length&&(location.hash=t)}function v(){var t,n=document.createElement("p"),e={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(n,null);for(var o in e)void 0!==n.style[o]&&(n.style[o]="translate3d(1px,1px,1px)",t=window.getComputedStyle(n).getPropertyValue(e[o]));return document.body.removeChild(n),void 0!==t&&t.length>0&&"none"!==t}function h(t){t.addClass("ms-table").wrapInner('<div class="ms-tableCell" style="height: '+p(t)+'px" />')}function p(t){var e=M;if(n.paddingTop||n.paddingBottom){var o=parseInt(t.css("padding-top"))+parseInt(t.css("padding-bottom"));e=M-o}return e}function g(){var n=window.location.hash.replace("#",""),e=t('.ms-left .ms-section[data-anchor="'+n+'"]');n.length&&i(e)}function w(e){var o=e.originalEvent;if(e.preventDefault(),t(".ms-left .ms-section.active"),!L){var i=C(o);P=i.y,z=i.x,Math.abs(D-P)>t(window).height()/100*n.touchSensitivity&&(D>P?t.fn.multiscroll.moveSectionDown():P>D&&t.fn.multiscroll.moveSectionUp())}}function S(t){var n=t.originalEvent,e=C(n);D=e.y,k=e.x}function x(){T&&(t(document).off("touchstart MSPointerDown").on("touchstart MSPointerDown",S),t(document).off("touchmove MSPointerMove").on("touchmove MSPointerMove",w))}function C(t){var n=[];return window.navigator.msPointerEnabled?(n.y=t.pageY,n.x=t.pageX):(n.y=t.touches[0].pageY,n.x=t.touches[0].pageX),n}n=t.extend({verticalCentered:!0,scrollingSpeed:700,easing:"easeInQuart",menu:!1,sectionsColor:[],anchors:[],navigation:!1,navigationPosition:"right",navigationColor:"#000",navigationTooltips:[],loopBottom:!1,loopTop:!1,css3:!1,paddingTop:0,paddingBottom:0,fixedElements:null,normalScrollElements:null,keyboardScrolling:!0,touchSensitivity:5,afterLoad:null,onLeave:null,afterRender:null,afterResize:null},n);var y,b=600,T="ontouchstart"in window||navigator.msMaxTouchPoints>0,E=t(".ms-left").find(".ms-section").length,L=!1,M=t(window).height();a(),x(),n.css3&&(n.css3=v()),t("html, body").css({overflow:"hidden",height:"100%"}),n.navigation&&(t("body").append('<div id="multiscroll-nav"><ul></ul></div>'),y=t("#multiscroll-nav"),y.css("color",n.navigationColor),y.addClass(n.navigationPosition)),t(".ms-right, .ms-left").css({width:"50%",position:"absolute",height:"100%","-ms-touch-action":"none"}),t(".ms-right").css({right:"1px",top:"0"}),t(".ms-left").css({left:"0",top:"0"}),t(".ms-left .ms-section, .ms-right .ms-section").each(function(){var e=t(this).index();if((n.paddingTop||n.paddingBottom)&&t(this).css("padding",n.paddingTop+" 0 "+n.paddingBottom+" 0"),n.sectionsColor[e]!==void 0&&t(this).css("background-color",n.sectionsColor[e]),n.anchors[e]!==void 0&&t(this).attr("data-anchor",n.anchors[e]),n.verticalCentered&&h(t(this)),t(this).closest(".ms-left").length&&n.navigation){var o="";n.anchors.length&&(o=n.anchors[e]);var i=n.navigationTooltips[e];i===void 0&&(i=""),n.navigation&&y.find("ul").append('<li data-tooltip="'+i+'"><a href="#'+o+'"><span></span></a></li>')}}),t(".ms-right").html(t(".ms-right").find(".ms-section").get().reverse()),t(".ms-left .ms-section, .ms-right .ms-section").each(function(){var e=t(this).index();t(this).css({height:"100%"}),!e&&n.navigation&&y.find("li").eq(e).find("a").addClass("active")}).promise().done(function(){t(".ms-left .ms-section.active").length||(t(".ms-right").find(".ms-section").last().addClass("active"),t(".ms-left").find(".ms-section").first().addClass("active")),t.isFunction(n.afterRender)&&n.afterRender.call(this),o(),t(window).on("load",function(){g()})}),t(window).on("hashchange",function(){var n=window.location.hash.replace("#",""),e=n,o=t(".ms-left").find('[data-anchor="'+e+'"]'),s="undefined"==typeof lastScrolledDestiny;(s||e!==lastScrolledDestiny)&&i(o)}),t(document).keydown(function(e){if(n.keyboardScrolling&&!L)switch(e.which){case 38:case 33:t.fn.multiscroll.moveSectionUp();break;case 40:case 34:t.fn.multiscroll.moveSectionDown();break;default:return}}),t(document).mousedown(function(t){return 1==t.button?(t.preventDefault(),!1):void 0}),t(document).on("click","#multiscroll-nav a",function(n){n.preventDefault();var e=t(this).parent().index();i(t(".ms-left .ms-section").eq(e))}),t(document).on({mouseenter:function(){var e=t(this).data("tooltip");t('<div class="multiscroll-tooltip '+n.navigationPosition+'">'+e+"</div>").hide().appendTo(t(this)).fadeIn(200)},mouseleave:function(){t(this).find(".multiscroll-tooltip").fadeOut().remove()}},"#multiscroll-nav li"),n.normalScrollElements&&(t(document).on("mouseover",n.normalScrollElements,function(){t.fn.multiscroll.setMouseWheelScrolling(!1)}),t(document).on("mouseout",n.normalScrollElements,function(){t.fn.multiscroll.setMouseWheelScrolling(!0)})),t(window).resize(function(){e()}),t.fn.multiscroll.moveSectionUp=function(){var e=t(".ms-left .ms-section.active").prev(".ms-section");!e.length&&n.loopTop&&(e=t(".ms-left .ms-section").last()),e.length&&i(e)},t.fn.multiscroll.moveSectionDown=function(){var e=t(".ms-left .ms-section.active").next(".ms-section");!e.length&&n.loopBottom&&(e=t(".ms-left .ms-section").first()),e.length&&i(e)},t.fn.multiscroll.moveTo=function(n){var e="";e=isNaN(n)?t('.ms-left [data-anchor="'+n+'"]'):t(".ms-left .ms-section").eq(n-1),i(e)},t.fn.multiscroll.setKeyboardScrolling=function(t){n.keyboardScrolling=t},t.fn.multiscroll.setMouseWheelScrolling=function(t){t?a():s()},t.fn.multiscroll.setScrollingSpeed=function(t){n.scrollingSpeed=t};var D=0,k=0,P=0,z=0}})(jQuery);
