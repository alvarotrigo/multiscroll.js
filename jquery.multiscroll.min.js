/**
 * multiscroll.js 0.1.7 Beta
 * https://github.com/alvarotrigo/multiscroll.js
 * MIT licensed
 *
 * Copyright (C) 2013 alvarotrigo.com - A project by Alvaro Trigo
 */
(function(b){b.fn.multiscroll=function(c){function q(){var a=window.location.hash.replace("#","");if(a.length){var c=b(".ms-left").find('[data-anchor="'+a+'"]');"undefined"!==typeof lastScrolledDestiny&&a===lastScrolledDestiny||h(c)}}function r(){t=b(window).height();b(".ms-tableCell").each(function(){b(this).css({height:v(b(this).parent())})});w();b.isFunction(c.afterResize)&&c.afterResize.call(this)}function w(){c.css3?(m(b(".ms-left"),"translate3d(0px, -"+b(".ms-left").find(".ms-section.active").position().top+
"px, 0px)",!1),m(b(".ms-right"),"translate3d(0px, -"+b(".ms-right").find(".ms-section.active").position().top+"px, 0px)",!1)):(b(".ms-left").css("top",-b(".ms-left").find(".ms-section.active").position().top),b(".ms-right").css("top",-b(".ms-right").find(".ms-section.active").position().top))}function h(a){var e=a.index(),d=b(".ms-right").find(".ms-section").eq(C-1-e),k=a.data("anchor"),g=b(".ms-left .ms-section.active").index()+1,h=D(a);l=!0;var f={left:a.position().top,right:d.position().top};d.addClass("active").siblings().removeClass("active");
a.addClass("active").siblings().removeClass("active");c.anchors.length&&(location.hash=k);x();c.css3?(b.isFunction(c.onLeave)&&c.onLeave.call(this,g,e+1,h),a="translate3d(0px, -"+f.left+"px, 0px)",f="translate3d(0px, -"+f.right+"px, 0px)",m(b(".ms-left"),a,!0),m(b(".ms-right"),f,!0),setTimeout(function(){b.isFunction(c.afterLoad)&&c.afterLoad.call(this,k,e+1);setTimeout(function(){l=!1},600)},c.scrollingSpeed)):(b.isFunction(c.onLeave)&&c.onLeave.call(this,g,e+1,h),b(".ms-left").animate({top:-f.left},
c.scrollingSpeed,c.easing,function(){b.isFunction(c.afterLoad)&&c.afterLoad.call(this,k,e+1);setTimeout(function(){l=!1},600)}),b(".ms-right").animate({top:-f.right},c.scrollingSpeed,c.easing));lastScrolledDestiny=k;E(k);F(k,e)}function y(){document.addEventListener?(document.addEventListener("mousewheel",f,!1),document.addEventListener("wheel",f,!1)):document.attachEvent("onmousewheel",f)}function f(a){a=window.event||a;a=Math.max(-1,Math.min(1,a.wheelDelta||-a.deltaY||-a.detail));l||(0>a?d.moveSectionDown():
d.moveSectionUp());return!1}function m(a,b,c){a.toggleClass("ms-easing",c);a.css({"-webkit-transform":b,"-moz-transform":b,"-ms-transform":b,transform:b})}function F(a,e){c.navigation&&(b("#multiscroll-nav").find(".active").removeClass("active"),a?b("#multiscroll-nav").find('a[href="#'+a+'"]').addClass("active"):b("#multiscroll-nav").find("li").eq(e).find("a").addClass("active"))}function E(a){c.menu&&(b(c.menu).find(".active").removeClass("active"),b(c.menu).find('[data-menuanchor="'+a+'"]').addClass("active"))}
function D(a){var c=b(".ms-left .ms-section.active").index();a=a.index();return c>a?"up":"down"}function x(){var a=b(".ms-left .ms-section.active"),e=a.data("anchor"),a=a.index(),a=String(a);c.anchors.length&&(a=e);a=a.replace("/","-").replace("#","");e=RegExp("\\b\\s?ms-viewing-[^\\s]+\\b","g");b("body")[0].className=b("body")[0].className.replace(e,"");b("body").addClass("ms-viewing-"+a)}function G(){var a=document.createElement("p"),b,c={webkitTransform:"-webkit-transform",OTransform:"-o-transform",
msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(a,null);for(var d in c)void 0!==a.style[d]&&(a.style[d]="translate3d(1px,1px,1px)",b=window.getComputedStyle(a).getPropertyValue(c[d]));document.body.removeChild(a);return void 0!==b&&0<b.length&&"none"!==b}function v(a){var b=t;if(c.paddingTop||c.paddingBottom)a=parseInt(a.css("padding-top"))+parseInt(a.css("padding-bottom")),b=t-a;return b}function H(a){var e=a.originalEvent;u(e)&&(a.preventDefault(),
b(".ms-left .ms-section.active"),l||(n=z(e).y,Math.abs(p-n)>b(window).height()/100*c.touchSensitivity&&(p>n?d.moveSectionDown():n>p&&d.moveSectionUp())))}function u(a){return"undefined"===typeof a.pointerType||"mouse"!=a.pointerType}function I(a){a=a.originalEvent;u(a)&&(p=z(a).y)}function z(a){var b=[];b.y="undefined"!==typeof a.pageY&&(a.pageY||a.pageX)?a.pageY:a.touches[0].pageY;b.x="undefined"!==typeof a.pageX&&(a.pageY||a.pageX)?a.pageX:a.touches[0].pageX;A&&u(a)&&(b.y=a.touches[0].pageY,b.x=
a.touches[0].pageX);return b}var d=b.fn.multiscroll;c=b.extend({verticalCentered:!0,scrollingSpeed:700,easing:"easeInQuart",menu:!1,sectionsColor:[],anchors:[],navigation:!1,navigationPosition:"right",navigationColor:"#000",navigationTooltips:[],loopBottom:!1,loopTop:!1,css3:!1,paddingTop:0,paddingBottom:0,fixedElements:null,normalScrollElements:null,keyboardScrolling:!0,touchSensitivity:5,sectionSelector:".ms-section",leftSelector:".ms-left",rightSelector:".ms-right",afterLoad:null,onLeave:null,
afterRender:null,afterResize:null},c);var A="ontouchstart"in window||0<navigator.msMaxTouchPoints||navigator.maxTouchPoints;".ms-right"!==c.rightSelector&&b(c.rightSelector).addClass("ms-right");".ms-left"!==c.leftSelector&&b(c.leftSelector).addClass("ms-left");var C=b(".ms-left").find(".ms-section").length,l=!1,g,t=b(window).height();y();A&&(MSPointer=window.PointerEvent?{down:"pointerdown",move:"pointermove"}:{down:"MSPointerDown",move:"MSPointerMove"},b(document).off("touchstart "+MSPointer.down).on("touchstart "+
MSPointer.down,I),b(document).off("touchmove "+MSPointer.move).on("touchmove "+MSPointer.move,H));c.css3&&(c.css3=G());b("html, body").css({overflow:"hidden",height:"100%"});".ms-section"!==c.sectionSelector&&b(c.sectionSelector).each(function(){b(this).addClass("ms-section")});c.navigation&&(b("body").append('<div id="multiscroll-nav"><ul></ul></div>'),g=b("#multiscroll-nav"),g.css("color",c.navigationColor),g.addClass(c.navigationPosition));b(".ms-right, .ms-left").css({width:"50%",position:"absolute",
height:"100%","-ms-touch-action":"none"});b(".ms-right").css({right:"1px",top:"0","-ms-touch-action":"none","touch-action":"none"});b(".ms-left").css({left:"0",top:"0","-ms-touch-action":"none","touch-action":"none"});b(".ms-left .ms-section, .ms-right .ms-section").each(function(){var a=b(this).index();(c.paddingTop||c.paddingBottom)&&b(this).css("padding",c.paddingTop+" 0 "+c.paddingBottom+" 0");"undefined"!==typeof c.sectionsColor[a]&&b(this).css("background-color",c.sectionsColor[a]);"undefined"!==
typeof c.anchors[a]&&b(this).attr("data-anchor",c.anchors[a]);if(c.verticalCentered){var d=b(this);d.addClass("ms-table").wrapInner('<div class="ms-tableCell" style="height: '+v(d)+'px" />')}b(this).closest(".ms-left").length&&c.navigation&&(d="",c.anchors.length&&(d=c.anchors[a]),a=c.navigationTooltips[a],"undefined"===typeof a&&(a=""),c.navigation&&g.find("ul").append('<li data-tooltip="'+a+'"><a href="#'+d+'"><span></span></a></li>'))});b(".ms-right").html(b(".ms-right").find(".ms-section").get().reverse());
b(".ms-left .ms-section, .ms-right .ms-section").each(function(){var a=b(this).index();b(this).css({height:"100%"});!a&&c.navigation&&g.find("li").eq(a).find("a").addClass("active")}).promise().done(function(){b(".ms-left .ms-section.active").length||(b(".ms-right").find(".ms-section").last().addClass("active"),b(".ms-left").find(".ms-section").first().addClass("active"));c.navigation&&g.css("margin-top","-"+g.height()/2+"px");b.isFunction(c.afterRender)&&c.afterRender.call(this);w();x();b(window).on("load",
function(){var a=window.location.hash.replace("#",""),c=b('.ms-left .ms-section[data-anchor="'+a+'"]');a.length&&h(c)})});b(window).on("hashchange",q);b(document).keydown(function(a){clearTimeout(B);var e=b(document.activeElement);e.is("textarea")||e.is("input")||e.is("select")||!c.keyboardScrolling||(-1<b.inArray(a.which,[40,38,32,33,34])&&a.preventDefault(),B=setTimeout(function(){var c=a.shiftKey;switch(a.which){case 38:case 33:d.moveSectionUp();break;case 32:if(c){d.moveSectionUp();break}case 40:case 34:d.moveSectionDown();
break;case 36:d.moveTo(1);break;case 35:d.moveTo(b(".ms-left .ms-section").length)}},150))});var B;b(document).mousedown(function(a){if(1==a.button)return a.preventDefault(),!1});b(document).on("click","#multiscroll-nav a",function(a){a.preventDefault();a=b(this).parent().index();h(b(".ms-left .ms-section").eq(a))});b(document).on({mouseenter:function(){var a=b(this).data("tooltip");b('<div class="multiscroll-tooltip '+c.navigationPosition+'">'+a+"</div>").hide().appendTo(b(this)).fadeIn(200)},mouseleave:function(){b(this).find(".multiscroll-tooltip").fadeOut(200,
function(){b(this).remove()})}},"#multiscroll-nav li");c.normalScrollElements&&(b(document).on("mouseenter",c.normalScrollElements,function(){d.setMouseWheelScrolling(!1)}),b(document).on("mouseleave",c.normalScrollElements,function(){d.setMouseWheelScrolling(!0)}));b(window).on("resize",r);d.moveSectionUp=function(){var a=b(".ms-left .ms-section.active").prev(".ms-section");!a.length&&c.loopTop&&(a=b(".ms-left .ms-section").last());a.length&&h(a)};d.moveSectionDown=function(){var a=b(".ms-left .ms-section.active").next(".ms-section");
!a.length&&c.loopBottom&&(a=b(".ms-left .ms-section").first());a.length&&h(a)};d.moveTo=function(a){var c="",c=isNaN(a)?b('.ms-left [data-anchor="'+a+'"]'):b(".ms-left .ms-section").eq(a-1);h(c)};d.setKeyboardScrolling=function(a){c.keyboardScrolling=a};d.setMouseWheelScrolling=function(a){a?y():document.addEventListener?(document.removeEventListener("mousewheel",f,!1),document.removeEventListener("wheel",f,!1)):document.detachEvent("onmousewheel",f)};d.setScrollingSpeed=function(a){c.scrollingSpeed=
a};var p=0,n=0;d.destroy=function(){d.setKeyboardScrolling(!1);d.setMouseWheelScrolling(!1);b(window).off("hashchange",q).off("resize",r);b(document).off("mouseenter","#multiscroll-nav li").off("mouseleave","#multiscroll-nav li").off("click","#multiscroll-nav a")};d.build=function(){d.setKeyboardScrolling(!0);d.setMouseWheelScrolling(!0);b(window).on("hashchange",q).on("resize",r);b(document).on("mouseenter","#multiscroll-nav li").on("mouseleave","#multiscroll-nav li").on("click","#multiscroll-nav a")}}})(jQuery);